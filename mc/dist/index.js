async function d(o,i,a){i.addEventListener("pageview",async r=>{let{client:e}=r,s=e.get("if_modified_since")||"",c=new Date().toUTCString();e.set("if_modified_since",c.toString(),{scope:"infinite"});let m={sid:a.siteId||e.url.hostname,h:e.url.host,p:e.url.pathname,r:e.referer},l=new URLSearchParams(m),n=a.apiBaseUrl;n.endsWith("/")||(n+="/"),n+=`collect?${l.toString()}`,await o.counterscale_worker.fetch(`${n}`,{method:"POST",headers:{"user-agent":e.userAgent,"if-modified-since":s},cf:{country:r.payload.country}}).then(t=>t.text()).then(t=>{console.log("text",t)}).catch(t=>{console.log("err",t)})})}export{d as default};
